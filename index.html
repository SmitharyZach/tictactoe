<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>TicTacToe</title>
  </head>
  <body>
    <div class="header">
      <h1>Tic Tac Toe</h1>
      <h2>Or the story of how I got three in a row</h2>
    </div>
    <div class="grid">
      <div class="content">
        <h1 id="turn">X you're up!</h1>
      </div>
      <div class="board" id="board">
        <div class="tile" id="1"></div>
        <div class="tile" id="2"></div>
        <div class="tile" id="3"></div>
        <div class="tile" id="4"></div>
        <div class="tile" id="5"></div>
        <div class="tile" id="6"></div>
        <div class="tile" id="7"></div>
        <div class="tile" id="8"></div>
        <div class="tile" id="9"></div>
      </div>
    </div>
  </body>
  <script>
    let div = document.getElementById("board");
    let turn = "X";

    function checkX() {
      if (
        (document.getElementById("1").innerHTML === "x" &&
          document.getElementById("2").innerHTML === "x" &&
          document.getElementById("3").innerHTML === "x") ||
        (document.getElementById("4").innerHTML === "x" &&
          document.getElementById("5").innerHTML === "x" &&
          document.getElementById("6").innerHTML === "x") ||
        (document.getElementById("7").innerHTML === "x" &&
          document.getElementById("8").innerHTML === "x" &&
          document.getElementById("9").innerHTML === "x") ||
        (document.getElementById("1").innerHTML === "x" &&
          document.getElementById("4").innerHTML === "x" &&
          document.getElementById("7").innerHTML === "x") ||
        (document.getElementById("2").innerHTML === "x" &&
          document.getElementById("5").innerHTML === "x" &&
          document.getElementById("8").innerHTML === "x") ||
        (document.getElementById("3").innerHTML === "x" &&
          document.getElementById("6").innerHTML === "x" &&
          document.getElementById("9").innerHTML === "x") ||
        (document.getElementById("1").innerHTML === "x" &&
          document.getElementById("5").innerHTML === "x" &&
          document.getElementById("9").innerHTML === "x") ||
        (document.getElementById("3").innerHTML === "x" &&
          document.getElementById("5").innerHTML === "x" &&
          document.getElementById("7").innerHTML === "x")
      ) {
        document.getElementById("turn").innerHTML =
          "X WINS!!!! \n Refresh to play again!";
        document.getElementsByClassName("grid")[0].style.backgroundColor =
          "green";
        document.removeEventListener("click", gameListener);
        div.removeEventListener("click", gameListener);

        return true;
      }
    }

    function checkO() {
      if (
        (document.getElementById("1").innerHTML === "o" &&
          document.getElementById("2").innerHTML === "o" &&
          document.getElementById("3").innerHTML === "o") ||
        (document.getElementById("4").innerHTML === "o" &&
          document.getElementById("5").innerHTML === "o" &&
          document.getElementById("6").innerHTML === "o") ||
        (document.getElementById("7").innerHTML === "o" &&
          document.getElementById("8").innerHTML === "o" &&
          document.getElementById("9").innerHTML === "o") ||
        (document.getElementById("1").innerHTML === "o" &&
          document.getElementById("4").innerHTML === "o" &&
          document.getElementById("7").innerHTML === "o") ||
        (document.getElementById("2").innerHTML === "o" &&
          document.getElementById("5").innerHTML === "o" &&
          document.getElementById("8").innerHTML === "o") ||
        (document.getElementById("3").innerHTML === "o" &&
          document.getElementById("6").innerHTML === "o" &&
          document.getElementById("9").innerHTML === "o") ||
        (document.getElementById("1").innerHTML === "o" &&
          document.getElementById("5").innerHTML === "o" &&
          document.getElementById("9").innerHTML === "o") ||
        (document.getElementById("3").innerHTML === "o" &&
          document.getElementById("5").innerHTML === "o" &&
          document.getElementById("7").innerHTML === "o")
      ) {
        document.getElementById("turn").innerHTML =
          "O WINS!!!! \n Refresh to play again!";
        document.getElementsByClassName("grid")[0].style.backgroundColor =
          "green";
        div.removeEventListener("click", gameListener);
        return true;
      } else {
        return false;
      }
    }

    function checkTie() {
      if (
        document.getElementById("1").innerHTML &&
        document.getElementById("2").innerHTML &&
        document.getElementById("3").innerHTML &&
        document.getElementById("4").innerHTML &&
        document.getElementById("5").innerHTML &&
        document.getElementById("6").innerHTML &&
        document.getElementById("7").innerHTML &&
        document.getElementById("8").innerHTML &&
        document.getElementById("9").innerHTML
      ) {
        document.getElementById("turn").innerHTML =
          "CAT!! Refresh to play again";
        document.getElementsByClassName("grid")[0].style.backgroundColor =
          "yellow";
        div.removeEventListener("click", gameListener);
      } else {
        return false;
      }
    }
    function gameListener(event) {
      if (event.target.id) {
        if (!event.target.innerHTML) {
          if (turn === "X") {
            event.target.innerHTML = "x";
            console.log(event.target);
            turn = "O";
            document.getElementById("turn").innerHTML = "O you're up!";
          } else {
            event.target.innerHTML = "o";
            turn = "X";
            document.getElementById("turn").innerHTML = "X you're up!";
          }
        } else {
          alert("Space already taken. If a draw refresh to play again");
        }
        checkX();
        checkO();
        if (!checkX() && !checkO()) {
          checkTie();
        }
      }
    }

    div.addEventListener("click", gameListener);
  </script>
</html>
